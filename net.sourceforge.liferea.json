{
    "app-id":"net.sourceforge.liferea",
    "runtime":"org.gnome.Platform",
    "runtime-version":"44",
    "sdk":"org.gnome.Sdk",
    "command":"liferea",
    "cleanup":[
        "/include",
        "/lib/pkgconfig",
        "/share/pkgconfig",
        "/share/aclocal",
        "/man",
        "/share/man",
        "*.la",
        "*.a"
    ],
    "finish-args":[
        "--device=dri",
        "--filesystem=xdg-download",
        "--share=ipc",
        "--share=network",
        "--socket=pulseaudio",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--talk-name=org.freedesktop.Notifications",
        "--talk-name=org.freedesktop.secrets"
    ],
    "modules":[
        "shared-modules/intltool/intltool-0.51.json",
        /* Remove when Liferea releases a version with webkit2gtk-4.1 */
        "shared-modules/libsoup/libsoup-2.4.json",
        {
            "name":"libpeas",
            "buildsystem" : "meson",
            "cleanup":[
                "/bin/*",
                "/lib/peas-demo"
            ],
            "sources":[
                {
                    "type":"archive",
                    "url":"https://download.gnome.org/sources/libpeas/1.36/libpeas-1.36.0.tar.xz",
                    "sha256":"297cb9c2cccd8e8617623d1a3e8415b4530b8e5a893e3527bbfd1edd13237b4c"
                }
            ]
        },

        {
            "name": "git",
            "make-args": [
                "NO_TCLTK=1",
                "INSTALL_SYMLINKS=1"
            ],
            "make-install-args": [
                "NO_TCLTK=1",
                "INSTALL_SYMLINKS=1"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.41.0.tar.xz",
                    "sha256": "e748bafd424cfe80b212cbc6f1bbccc3a47d4862fb1eb7988877750478568040"
                }
            ]
        },
        {
            "name": "aria2",
            "config-opts": [
                "--enable-libaria2",
                "--with-ca-bundle=/etc/ssl/certs/ca-certificates.crt"
            ],
            "sources": [
                {
                    "type": "archive",
                    "sha256": "58d1e7608c12404f0229a3d9a4953d0d00c18040504498b483305bcb3de907a5",
                    "url": "https://github.com/aria2/aria2/releases/download/release-1.36.0/aria2-1.36.0.tar.xz"
                }
            ]
        },
        /* Remove unifdef, webkit2gtk-4.0 when Liferea releases a version with webkit2gtk-4.1 */
        {
            "name": "unifdef",
            "no-autogen": true,
            "make-install-args": [
                "prefix=${FLATPAK_DEST}"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://dotat.at/prog/unifdef/unifdef-2.12.tar.xz",
                    "sha256": "43ce0f02ecdcdc723b2475575563ddb192e988c886d368260bc0a63aee3ac400"
                }
            ],
            "cleanup": [ "*" ]
        },
        {
            "name": "webkit2gtk-4.0",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DPORT=GTK",
                "-DENABLE_BUBBLEWRAP_SANDBOX=OFF",
                "-DENABLE_DOCUMENTATION=OFF",
                "-DUSE_SOUP2=ON"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://webkitgtk.org/releases/webkitgtk-2.40.5.tar.xz",
                    "sha256": "7de051a263668621d91a61a5eb1c3771d1a7cec900043d4afef06c326c16037f"
                }
            ]
        },
        {
            "name":"liferea",
            "sources":[
                {
                    "type":"git",
                    "url":"https://github.com/lwindolf/liferea.git",
                    "tag": "v1.14.6",
                    "commit":"b394b0f4806f5c47e7a156e2bf40b2d670a7ee21"
                },
                {
                    "type":"patch",
                    "path":"patches/appdata.patch"
                },
                {
                    "type":"patch",
                    "path":"patches/download.patch"
                }
            ]
        }
    ]
}
